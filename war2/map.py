import pygame
import game

class Sprite(game.Sprite):
    def __init__(self):
        super().__init__('assets/sprites/winter.png', 32, 32)


class Map():
    def __init__(self, scene):
        self.scene = scene
        self.sprite = Sprite()
        self.tiles = dict()
        self.width = 32
        self.height = 32
        self.data = [290, 177, 183, 337, 274, 266, 284, 348, 183, 340, 336, 198, 188, 177, 177, 194, 289, 286, 268, 280, 178, 197, 344, 289, 286, 287, 268, 277, 285, 286, 286, 267, 179, 275, 266, 283, 269, 372, 263, 266, 265, 264, 266, 264, 264, 265, 264, 265, 284, 343, 270, 262, 264, 284, 339, 339, 348, 346, 289, 291, 190, 182, 348, 271, 341, 270, 252, 281, 288, 286, 267, 352, 376, 379, 249, 379, 246, 377, 234, 243, 263, 264, 261, 350, 235, 263, 265, 264, 266, 284, 186, 179, 188, 342, 193, 288, 341, 288, 285, 272, 264, 266, 261, 371, 250, 372, 353, 375, 247, 370, 233, 239, 363, 350, 354, 353, 366, 238, 358, 248, 257, 263, 284, 186, 338, 189, 340, 196, 347, 275, 264, 260, 244, 351, 258, 247, 257, 243, 234, 350, 370, 251, 370, 378, 255, 372, 258, 257, 367, 238, 258, 239, 364, 239, 262, 264, 266, 265, 283, 337, 336, 269, 367, 374, 239, 240, 242, 243, 255, 236, 245, 377, 363, 352, 369, 258, 357, 244, 358, 241, 365, 243, 365, 350, 378, 252, 354, 253, 244, 254, 263, 265, 338, 271, 241, 257, 236, 235, 371, 253, 238, 378, 355, 250, 234, 357, 350, 256, 250, 350, 362, 366, 235, 240, 238, 369, 372, 350, 358, 240, 360, 236, 368, 249, 264, 261, 244, 252, 378, 370, 241, 362, 373, 250, 248, 246, 368, 252, 375, 366, 252, 351, 365, 355, 239, 240, 367, 258, 246, 258, 242, 357, 374, 241, 357, 277, 259, 239, 240, 378, 253, 239, 363, 241, 232, 378, 250, 254, 242, 236, 256, 233, 241, 253, 354, 246, 363, 368, 359, 256, 246, 351, 361, 355, 355, 242, 277, 291, 367, 235, 367, 245, 234, 351, 237, 259, 255, 245, 375, 247, 377, 364, 363, 351, 252, 360, 368, 241, 249, 370, 238, 232, 377, 370, 378, 241, 245, 247, 280, 199, 363, 367, 254, 373, 357, 352, 240, 364, 358, 362, 373, 378, 365, 378, 235, 372, 362, 254, 246, 245, 360, 243, 373, 236, 362, 249, 378, 239, 369, 371, 281, 345, 355, 351, 251, 355, 373, 372, 253, 355, 240, 369, 365, 243, 252, 353, 361, 354, 363, 242, 234, 236, 369, 248, 376, 361, 369, 365, 359, 257, 259, 251, 280, 338, 367, 237, 245, 257, 365, 356, 256, 358, 242, 360, 351, 362, 352, 356, 253, 355, 248, 367, 351, 241, 367, 369, 241, 236, 236, 375, 369, 257, 259, 246, 281, 341, 237, 252, 363, 377, 356, 353, 373, 255, 373, 365, 359, 367, 373, 350, 253, 237, 356, 369, 256, 243, 234, 245, 234, 243, 256, 240, 250, 245, 259, 236, 281, 341, 233, 255, 350, 367, 238, 236, 250, 351, 357, 358, 253, 243, 372, 253, 247, 256, 246, 362, 357, 234, 237, 370, 245, 376, 244, 251, 256, 369, 234, 352, 281, 178, 351, 366, 375, 369, 251, 244, 247, 354, 376, 359, 254, 364, 246, 363, 376, 253, 362, 357, 361, 239, 244, 255, 236, 350, 375, 361, 255, 351, 361, 254, 281, 193, 287, 268, 240, 375, 373, 360, 358, 354, 363, 370, 258, 351, 364, 239, 250, 353, 243, 354, 256, 362, 251, 233, 372, 376, 376, 371, 365, 369, 362, 352, 281, 188, 187, 270, 374, 373, 355, 253, 232, 239, 257, 362, 248, 355, 251, 356, 368, 358, 367, 251, 353, 256, 251, 377, 258, 248, 369, 259, 361, 233, 245, 368, 280, 344, 179, 269, 367, 251, 357, 236, 250, 350, 251, 232, 363, 355, 377, 376, 239, 351, 258, 354, 242, 368, 239, 365, 257, 361, 240, 234, 373, 253, 235, 252, 282, 182, 179, 289, 268, 363, 235, 364, 352, 353, 248, 238, 371, 370, 354, 355, 357, 352, 254, 360, 258, 252, 243, 251, 252, 367, 259, 242, 254, 371, 241, 276, 291, 189, 189, 198, 270, 276, 286, 267, 364, 379, 373, 375, 251, 238, 258, 377, 254, 252, 241, 243, 357, 378, 237, 249, 364, 247, 367, 354, 250, 350, 239, 282, 199, 346, 283, 337, 288, 291, 199, 269, 353, 276, 286, 286, 267, 367, 249, 259, 375, 378, 373, 246, 363, 374, 245, 236, 253, 367, 355, 259, 247, 363, 276, 290, 181, 275, 281, 187, 198, 343, 340, 288, 287, 291, 184, 184, 269, 361, 277, 267, 234, 276, 287, 286, 287, 267, 366, 367, 277, 287, 285, 287, 287, 287, 290, 194, 183, 269, 262, 266, 265, 264, 264, 265, 266, 265, 266, 264, 261, 276, 291, 289, 287, 291, 181, 183, 333, 289, 268, 244, 280, 347, 183, 176, 346, 197, 187, 182, 275, 260]
        for tile in set(self.data):
            if tile > 0 and tile not in self.tiles:
                self.tiles[tile] = self.sprite.get(tile)
        self.scene.add(self)

    def update(self, delta):
        pass

    def draw(self, screen):
        i = -1
        for y in range(int(self.scene.height/self.height)):
            for x in range(int(self.scene.width/self.width)):
                i += 1
                if self.data[i] not in self.tiles:
                    continue
                screen.blit(
                    pygame.transform.scale(self.tiles[self.data[i]], (self.width, self.height)),
                    (x*self.width, y*self.height))
